<!-- -*- mode: XML -*- -->
<launch>

    ################ self car node ################
    <node pkg="car" type="car" name="self_car" output="screen" ns="self">
        <param name="odom_frame" value="odom"/>
        <param name="base_frame" value="base_link"/>
        <!-- Initial pose of car -->
        <param name="x" value="0"/>
        <param name="y" value="0"/>
        <param name="z" value="0"/>
        <!-- Initial velocity of car -->
        <param name="vx" value="0"/>
        <param name="vy" value="0"/>
        <param name="vth" value="0"/>
        <param name="duration" value="0.01"/>
    </node>

    ################ drawpath node ################
    <node pkg="drawpath" type="drawpath" name="self_drawpath" output="screen" ns="self">
        <param name="fixed_frame" value="odom"/>
        <param name="odom_frame" value="odom"/>
        <param name="use_odom" value="true"/>
    </node>

    ################ target car node ################
    <node pkg="car" type="car" name="target_car" output="screen" ns="target">
        <param name="odom_frame" value="odom"/>
        <param name="base_frame" value="base_link"/>
        <!-- Initial pose of car -->
        <param name="x" value="3"/>
        <param name="y" value="0"/>
        <param name="z" value="0"/>
        <!-- Initial velocity of car -->
        <param name="vx" value="1"/>
        <param name="vy" value="0"/>
        <param name="vth" value="0"/>
        <param name="duration" value="0.01"/>
    </node>    

    ################ drawpath node ################
    <node pkg="drawpath" type="drawpath" name="target_drawpath" output="screen" ns="target">
        <param name="fixed_frame" value="odom"/>
        <param name="odom_frame" value="odom"/>
        <param name="use_odom" value="true"/>
    </node>

    ################ pidtrack node ################
    <node pkg="car" name="pidtrack" type="pidtrack" output="screen"> 
        <param name="KP" value="3"/>
        <param name="KI" value="1"/>
        <param name="KD" value="0"/>
        <param name="duration" value="0.1"/>
        <param name="windup" value="20.0"/>
    </node>

    ################ rviz node ################
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find car)/rviz/pidtrack.rviz"/>

</launch>
